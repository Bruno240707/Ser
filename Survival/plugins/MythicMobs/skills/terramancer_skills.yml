######## created by samus2002 #########

# Earth Ring #

Earth_Ring:
  Cooldown: 0
  Skills:
  - Aura{auraName=Earth_Ring;duration=20} @self
  - skill{s=Earth_Ring_VISUAL}
  - skill{s=Earth_Ring_DAMAGE;damage=1} @EIRR{min=1.25;max=2} ?!issprinting
  - skill{s=Earth_Ring_DAMAGE_SPRINT;damage=1;repeat=2;repeati=3} @EIRR{min=2.25;max=3} ?issprinting

Earth_Ring_VISUAL:
  Skills:
  - auraremove{aura=Earth_Ring_VISUAL} @self ?!mobsInRadius{types=VFX_Earth_Ring;amount=1;radius=5}
  - orbital{auraName=Earth_Ring_VISUAL;bulletType=MOB;mob=VFX_Earth_Ring;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=1;duration=99999;oy=2.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0} @self
Earth_Ring_REMOVE_AS_CHILD:
  TargetConditions:
  - hasaura{n=Earth_Ring} false
  Skills:
  - state{s=despawn;speed=1;p=0} @self
  - delay 9
  - auraremove{aura=Earth_Ring_VISUAL} @owner

Earth_Ring_SPEEDUP:
  Cooldown: 9999
  Conditions:
  - stance{s=BIG} false
  TargetConditions:
  - issprinting true
  Skills:
  - modstate{s=loop;sp=1.75} @self
  - state{s=loop_big;li=5;p=0} @self
  - setstance{stance=BIG} @self
  - setSkillCooldown{skill=Earth_Ring_SPEEDDOWN;seconds=0} @self
Earth_Ring_SPEEDDOWN:
  Cooldown: 9999
  Conditions:
  - stance{s=NORMAL} false
  TargetConditions:
  - issprinting false
  Skills:
  - modstate{s=loop;sp=1} @self
  - state{s=loop_small;li=5;p=0} @self
  - setstance{stance=NORMAL} @self
  - setSkillCooldown{skill=Earth_Ring_SPEEDUP;seconds=0} @self

Earth_Ring_DAMAGE:
  Cooldown: 0
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - throw{velocity=8;velocityY=0}
  - effect:sound{s=block.deepslate.break;volume=1;pitch=<random.float.0.7to0.8>} @self
  - effect:sound{s=entity.goat.ram_impact;volume=0.7;pitch=<random.float.0.7to0.8>} @self

  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Ring_DAMAGE_SPRINT:
  Cooldown: 0
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true}
  - throw{velocity=8;velocityY=0}
  - effect:sound{s=block.deepslate.break;volume=1;pitch=<random.float.0.7to0.8>} @self
  - effect:sound{s=entity.goat.ram_impact;volume=0.7;pitch=<random.float.0.7to0.8>} @self

  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  


# Earth Rubble #

Earth_Rubble_TRAIL:
  Skills:
  - skill{s=Earth_Rubble_TRAIL1}
  - skill{s=Earth_Rubble_TRAIL2}
Earth_Rubble_TRAIL1:
  Skills:
  - randomskill{skills=
    [- partvis{p=bone3;v=true;em=true;child=true} @self],
    [- partvis{p=bone5;v=true;em=true;child=true} @self],
    [- partvis{p=bone7;v=true;em=true;child=true} @self]}
Earth_Rubble_TRAIL2:
  Skills:
  - randomskill{skills=
    [- partvis{p=bone2;v=true;em=true;child=true} @self],
    [- partvis{p=bone4;v=true;em=true;child=true} @self],
    [- partvis{p=bone6;v=true;em=true;child=true} @self]}




Earth_Rubble:
  Cooldown: 0.4
  Conditions:
  - crouching false
  Skills:
  - skill{s=Earth_Rubble_LARGE;damage=3} ?hasaurastacks{auraName=Earth_Rubble_STACK;stacks=3}
  - skill{s=Earth_Rubble_SMALL;damage=3} ?!hasaurastacks{auraName=Earth_Rubble_STACK;stacks=3}

# SMALL
Earth_Rubble_SMALL:
  Skills:
  - Aura{auraName=Earth_Rubble_STACK;duration=400;maxStacks=3;delay=1} @self ?!hasaurastacks{auraName=Earth_Rubble_STACK;stacks=3}
  - skill{s=Earth_Rubble_SHOOT_FX;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=1.9;uel=true}
  - skill{s=Earth_Rubble_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_shoot;volume=1.6;pitch=<random.float.0.75to1>} @origin
Earth_Rubble_SHOOT_FX:
  Skills:
  - summon{type=VFX_Earth_Pulse_Shoot_Impact;amount=1;radius=0;yRadius=0;onSurface=false}
Earth_Rubble_PRO:
  Skills:
  - randomskill{skills=
    [- projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_Earth_Rubble_1;onHit=Earth_Rubble_DAMAGE;ohb=Earth_Rubble_END;v=26;i=1;hR=0.4;vR=0.4;mr=17;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}],
    [- projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_Earth_Rubble_2;onHit=Earth_Rubble_DAMAGE;ohb=Earth_Rubble_END;v=26;i=1;hR=0.4;vR=0.4;mr=17;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}],
    [- projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_Earth_Rubble_3;onHit=Earth_Rubble_DAMAGE;ohb=Earth_Rubble_END;v=26;i=1;hR=0.4;vR=0.4;mr=17;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}]}
Earth_Rubble_DAMAGE:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.6;pitch=<random.float.1to1.1>} @origin
  
  #impact
  - particles{p=Campfire_Cosy_Smoke;amount=4;hS=0.3;vS=0.4;y=0;size=1;speed=0.01} @origin
  - projectile{origin=@origin;bulletType=MOB;mob=VFX_Earth_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;byo=0;ham=true}
  - projectile{origin=@origin;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;byo=0;ham=true}
Earth_Rubble_END:
  Cooldown: 0.01
  Skills:
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.6;pitch=<random.float.1to1.1>} @origin
  #impact
  - particles{p=Campfire_Cosy_Smoke;amount=4;hS=0.3;vS=0.4;y=0;size=1;speed=0.01} @origin
  - projectile{origin=@origin;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;byo=0;ham=true}



# LARGE
Earth_Rubble_LARGE:
  Skills:
  - auraremove{aura=Earth_Rubble_STACK;delay=1} @self
  - skill{s=Earth_Rubble_LARGE_SHOOT_FX;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=1.9;uel=true}
  - skill{s=Earth_Rubble_LARGE_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_shoot;volume=1.6;pitch=<random.float.0.6to0.8>} @origin

Earth_Rubble_LARGE_SHOOT_FX:
  Skills:
  - summon{type=VFX_Earth_Pulse_Shoot_Impact2;amount=1;radius=0;yRadius=0;onSurface=false}
Earth_Rubble_LARGE_PRO:
  Skills:
  - projectile{tickinterpolation=5;bulletType=MOB;mob=VFX_Earth_Rubble_Large;onHit=Earth_Rubble_LARGE_DAMAGE;ohb=Earth_Rubble_LARGE_END;v=26;i=1;hR=0.4;vR=0.4;mr=17;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
Earth_Rubble_LARGE_DAMAGE:
  Cooldown: 0.01
  Skills:
  - skill{s=Earth_Rubble_LARGE_DAMAGE_D} @EntitiesNearOrigin{r=3.5;conditions=[- isLiving true - hasaura{aura=immunedelay} false ]}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_smash;volume=1.6;pitch=<random.float.1to1.1>} @origin
  - particles{p=Campfire_Cosy_Smoke;amount=7;hS=0.7;vS=0.6;y=0;size=1;speed=0.04} @origin
  - summon{type=VFX_Earth_Dust;amount=3;radius=2;yRadius=2;onSurface=false} @origin{y=-1.5}
  - summon{type=VFX_Earth_Dust;amount=3;radius=2;yRadius=2;onSurface=false;delay=1} @origin{y=-1.5}
  - summon{type=VFX_Earth_Dust;amount=3;radius=2;yRadius=2;onSurface=false;delay=2} @origin{y=-1.5}
Earth_Rubble_LARGE_DAMAGE_D:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage> * 1.5;pkb=true;hnp=true;hp=true}
  - throw{velocity=3;velocityY=0}
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}

Earth_Rubble_LARGE_END:
  Cooldown: 0.01
  Skills:
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_smash;volume=1.6;pitch=<random.float.1to1.1>} @origin
  #impact
  - projectile{origin=@origin;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;byo=0;ham=true}
  - particles{p=Campfire_Cosy_Smoke;amount=7;hS=0.4;vS=0.4;y=0;size=1;speed=0.04} @origin


# Earth Shift #

Earth_Shift:
  Cooldown: 1
  Conditions:
  - crouching false
  Skills:
  - skill{s=Earth_Shift_PRO;damage=3} @forward{f=12;y=0;lockpitch=true}
  - setvariable{var=casteryaw;type=INTEGER;value=<caster.l.yaw>;scope=CASTER} @self
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_emerge_1;volume=1.3;pitch=<random.float.0.9to1.1>} @self
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_emerge_1;volume=1.3;pitch=<random.float.0.9to1.1>;delay=4} @self
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_emerge_1;volume=1.3;pitch=<random.float.0.9to1.1>;delay=8} @self
Earth_Shift_PRO:
  Skills:
  - projectile{tickinterpolation=5;oE=Earth_Shift_SMALL_DAMAGE;v=25;i=1;hR=0.6;vR=0.6;md=2;mr=30;hnp=false;hO=0;sE=false;sB=false;hs=true;hfs=0;sfo=0;syo=0;tyo=0;sso=0;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
  - projectile{tickinterpolation=5;oE=Earth_Shift_MED_DAMAGE;v=28;i=1;hR=0.6;vR=0.6;md=3;mr=30;hnp=false;hO=0;sE=false;sB=false;hs=true;hfs=0;sfo=0;syo=0;tyo=0;sso=0;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
  - projectile{tickinterpolation=5;oE=Earth_Shift_LARGE_DAMAGE;v=25;i=1;hR=0.6;vR=0.6;md=5;mr=30;hnp=false;hO=0;sE=false;sB=false;hs=true;hfs=0;sfo=0;syo=0;tyo=0;sso=0;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
Earth_Shift_SMALL_DAMAGE:
  Cooldown: 0.01
  Skills:
  - summon{type=VFX_Earth_Shift_1;amount=1;radius=0;yRadius=0;onSurface=true;yaw=<caster.var.casteryaw>} @origin
  - skill{s=Earth_Shift_DAMAGE_D1;delay=5} @EntitiesNearOrigin{r=2;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}
  - particles{p=Campfire_Cosy_Smoke;amount=4;hS=0.3;vS=0.15;y=0;size=1;speed=0.04} @origin
  - summon{type=VFX_Earth_Pulse1;amount=1;radius=0;yRadius=0;onSurface=true} @origin
Earth_Shift_MED_DAMAGE:
  Cooldown: 0.01
  Skills:
  - summon{type=VFX_Earth_Shift_2;amount=1;radius=0;yRadius=0;onSurface=true;yaw=<caster.var.casteryaw>} @origin
  - skill{s=Earth_Shift_DAMAGE_D2;delay=5} @EntitiesNearOrigin{r=2;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}
  - particles{p=Campfire_Cosy_Smoke;amount=6;hS=0.5;vS=0.15;y=0;size=1;speed=0.04} @origin
  - summon{type=VFX_Earth_Pulse2;amount=1;radius=0;yRadius=0;onSurface=true} @origin
Earth_Shift_LARGE_DAMAGE:
  Cooldown: 0.01
  Skills:
  - summon{type=VFX_Earth_Shift_3;amount=1;radius=0;yRadius=0;onSurface=true;yaw=<caster.var.casteryaw>} @origin
  - skill{s=Earth_Shift_DAMAGE_D3;delay=5} @EntitiesNearOrigin{r=2.5;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}
  - particles{p=Campfire_Cosy_Smoke;amount=8;hS=0.7;vS=0.15;y=0;size=1;speed=0.04} @origin
  - summon{type=VFX_Earth_Pulse3;amount=1;radius=0;yRadius=0;onSurface=true} @origin
Earth_Shift_DAMAGE_D1:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHSHIFT} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHSHIFT;d=15}
  - damage{a=<skill.damage> * 0.5;pkb=true;hnp=true;hp=true}
  - throw{velocity=3;velocityY=1}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Shift_DAMAGE_D2:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHSHIFT} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHSHIFT;d=15}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - throw{velocity=7;velocityY=2}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Shift_DAMAGE_D3:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHSHIFT} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHSHIFT;d=15}
  - damage{a=<skill.damage> * 1.5;pkb=true;hnp=true;hp=true}
  - throw{velocity=10;velocityY=4}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin

  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}





# Earth Clap #

Earth_Clap:
  Conditions:
  - hasaurastacks{auraName=Earth_Clap_aura} castinstead Earth_Clap_SKILL
  Skills:
  - Aura{auraName=Earth_Clap_aura;interval=1;duration=5} @self
  
Earth_Clap_SKILL:
  Cooldown: 3
  Skills:
  #summon pillar
  - skill{s=Earth_Clap_SUMMON_PRO;damage=3;origin=@SelfEyeLocation{fo=-0.5;yo=0}} @targetblock
  - setvariable{var=earthclapdur;type=INTEGER;value=60;scope=CASTER} @self

Earth_Clap_SUMMON_PRO:
  Skills:
  - projectile{tickinterpolation=5;ohb=Earth_Clap_SUMMON;v=35;i=1;hR=0.4;vR=0.4;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0.5;tyo=0.5;sso=0;fo=true;byo=0;drawhitbox=false;ham=true}
Earth_Clap_SUMMON:
  Cooldown: 1
  Skills:
  - summon{type=VFX_Earth_Clap;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - summon{type=VFX_Earth_Pulse4;amount=1;radius=0;yRadius=0;onSurface=true;delay=5} @origin
  - summon{type=VFX_Earth_Shift_Impact2;amount=1;radius=0;yRadius=0;onSurface=true;delay=5} @origin
  - skill{s=Earth_Clap_DAMAGE;delay=8} @EntitiesNearOrigin{r=3;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
  - skill{s=Earth_Clap_CLAP_DAMAGE;delay=47} @EntitiesNearOrigin{r=6;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
Earth_Clap_DAMAGE:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - throw{velocity=0;velocityY=11}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Clap_CLAP_DAMAGE:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  - stun{d=<caster.var.earthclapdur>;kb=true;f=true;CancelOnTakeDamage=false;CancelOnDeath=true}
  - orbital{onTick=Earth_Clap_STUN_FX;r=0.5;points=22;i=1;duration=<caster.var.earthclapdur>;oy=2.3;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}
  - orbital{auraName=VFX_Earth_Root;bulletType=MOB;mob=VFX_Earth_Root;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=1;duration=<caster.var.earthclapdur>;oy=1.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Clap_STUN_FX:
  Skills:
  - particles{p=crit;amount=2;hS=0;vS=0;y=0;size=0.4;speed=0} @origin
Earth_Clap_SUDO:
  Skills:
  - state{s=remove;delay=<caster.var.earthclapdur> - 15} @trigger

# Earth Spikes #

Earth_Spikes:
  Cooldown: 0
  Conditions:
  - crouching castinstead Earth_Spikes_STACK
  Skills:
  - auraremove{aura=Earth_Spikes_STACK} @self
Earth_Spikes_STACK:
  Conditions:
  - hasaurastacks{auraName=Earth_Spikes_STACK;stacks=2} castinstead Earth_Spikes_Skill
  Skills:
  - Aura{auraName=Earth_Spikes_STACK;duration=120;maxStacks=2} @self
  

Earth_Spikes_Skill:
  Cooldown: 3
  Skills:
  - auraremove{aura=Earth_Spikes_STACK} @self
  - lunge{velocity=0;velocityY=0.5} @forward{f=0;y=1}
  - effect:sound{s=entity.ender_dragon.flap;volume=1;pitch=<random.float.0.9to1.1>} @self
  
  - delay 4
  - lunge{velocity=0;velocityY=-0.7} @forward{f=0;y=-1}
  - effect:sound{s=entity.ender_dragon.flap;volume=1;pitch=<random.float.1.2to1.3>} @self
  - effect:sound{s=item.mace.smash_ground;volume=1;pitch=<random.float.0.7to0.8>} @self

  - delay 2
  - summon{type=VFX_Earth_Spike_Summon;amount=1;radius=0;yRadius=0;onSurface=true} @selflocation
  - skill{s=Earth_Spike_DAMAGE_LIFT;damage=3;origin=@forward{f=3;so=3;y=0;lockpitch=true}} @EntitiesNearOrigin{r=3;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
  - skill{s=Earth_Spike_DAMAGE_LIFT;damage=3;origin=@forward{f=3;so=-3;y=0;lockpitch=true}} @EntitiesNearOrigin{r=3;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
  - skill{s=Earth_Spike_DAMAGE_LIFT;damage=3;origin=@forward{f=-3.2;so=0;y=0;lockpitch=true}} @EntitiesNearOrigin{r=3;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}

  - delay 40

  #1st spike
  - skill{s=Earth_Spike_SUMMON_PRO1;damage=3;origin=@SelfEyeLocation{fo=-0.5;yo=0}} @targetblock
  
  - delay 20
  - skill{s=Earth_Spike_SUMMON_PRO2;damage=3;origin=@SelfEyeLocation{fo=-0.5;yo=0}} @targetblock
  
  - delay 20
  - skill{s=Earth_Spike_SUMMON_PRO3;damage=3;origin=@SelfEyeLocation{fo=-0.5;yo=0}} @targetblock
  
Earth_Spike_SUMMON_PRO1:
  Skills:
  - projectile{tickinterpolation=5;ohb=Earth_Spike_SUMMON_1;v=35;i=1;hR=0.4;vR=0.4;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0.5;tyo=0.5;sso=0;fo=true;byo=0;drawhitbox=false;ham=true}
Earth_Spike_SUMMON_1:
  Cooldown: 1
  Skills:
  - summon{type=VFX_Earth_Spike_1;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - skill{s=Earth_Spike_DAMAGE;delay=4} @EntitiesNearOrigin{r=4;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
Earth_Spike_SUMMON_PRO2:
  Skills:
  - projectile{tickinterpolation=5;ohb=Earth_Spike_SUMMON_2;v=35;i=1;hR=0.4;vR=0.4;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0.5;tyo=0.5;sso=0;fo=true;byo=0;drawhitbox=false;ham=true}
Earth_Spike_SUMMON_2:
  Cooldown: 1
  Skills:
  - summon{type=VFX_Earth_Spike_2;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - skill{s=Earth_Spike_DAMAGE;delay=4} @EntitiesNearOrigin{r=4;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
Earth_Spike_SUMMON_PRO3:
  Skills:
  - projectile{tickinterpolation=5;ohb=Earth_Spike_SUMMON_3;v=35;i=1;hR=0.4;vR=0.4;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0.5;tyo=0.5;sso=0;fo=true;byo=0;drawhitbox=false;ham=true}
Earth_Spike_SUMMON_3:
  Cooldown: 1
  Skills:
  - summon{type=VFX_Earth_Spike_3;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - skill{s=Earth_Spike_DAMAGE;delay=4} @EntitiesNearOrigin{r=4;conditions=[  - isLiving true - hasaura{aura=immunedelay} false ]}
Earth_Spike_DAMAGE_LIFT:
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage> * 0.5;pkb=true;hnp=true;hp=true}
  - throw{velocity=0;velocityY=8}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Spike_DAMAGE:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - pull{velocity=6;to=true}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}



# Earth Wave #

Earth_Wave:
  Cooldown: 3
  Conditions:
  - crouching true
  Skills:
  - lunge{velocity=0.1;velocityY=0.3;repeat=2;repeati=1} @forward{f=0;y=1;lockpitch=true} ?issprinting
  - aura{auraName=WAVESPRINT;duration=80} @self ?issprinting
  - delay 3
  - skill{s=Earth_Wave_PRO;damage=3} @forward{f=12;y=0;lockpitch=true}
Earth_Wave_PRO:
  Skills:
  - projectile{tickinterpolation=5;oT=Earth_Wave_T;oE=Earth_Wave_E;v=15;i=4;hR=1;vR=1;md=60;mr=50;hnp=false;hO=0;sE=false;sB=false;hs=true;hfs=0;sfo=2;syo=0;tyo=0;sso=0;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
Earth_Wave_T:
  Cooldown: 0.01
  Skills:
  - setvariable{var=waveheightnow;value=<caster.l.y>;type=INTEGER;scope=CASTER} @self ?hasaura{n=WAVESPRINT}
  - delay 1
  - teleport{spreadh=0;spreadv=0;cooldown=0.01} @origin{y=1} ?!varEquals{var=waveheightnow;value=<caster.var.waveheightactual>;scope=CASTER} ?hasaura{n=WAVESPRINT}
  - lunge{velocity=0.7;velocityY=0;repeat=3;repeati=1} @origin ?hasaura{n=WAVESPRINT}
  - setprojectiledirection @forward{f=50;y=0;lockpitch=true}

  - summon{type=VFX_Earth_Wave;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - skill{s=Earth_Wave_DAMAGE_D;delay=1} @EntitiesNearOrigin{r=2.5;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}
Earth_Wave_E:
  Cooldown: 0.01
  Skills:
  - lunge{velocity=1;velocityY=0;repeat=3;repeati=1} @forward{f=2;y=0;lockpitch=true} ?hasaura{n=WAVESPRINT}
Earth_Wave_DAMAGE_D:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHWAVE} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHWAVE;d=10}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - throw{velocity=4;velocityY=0}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  
  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}


  
# Earth Shockwave #

Earth_Shockwave:
  Cooldown: 3
  Conditions:
  - crouching true
  Skills:
  - lunge{velocity=0;velocityY=0.5} @forward{f=0;y=1}
  - effect:sound{s=entity.ender_dragon.flap;volume=1;pitch=<random.float.0.9to1.1>} @self
  - lunge{velocity=0;velocityY=0.05;repeat=10;repeati=1;delay=4} @forward{f=0;y=0.1}
  
  - delay 14
  - lunge{velocity=0;velocityY=-0.7} @forward{f=0;y=-1}
  - effect:sound{s=entity.ender_dragon.flap;volume=1;pitch=<random.float.1.2to1.3>} @self
  - effect:sound{s=item.mace.smash_ground;volume=1;pitch=<random.float.0.7to0.8>} @self

  - delay 2
  - setvariable{var=earthshockwavedur;type=INTEGER;value=90;scope=CASTER} @self
  - skill{s=Earth_Shockwave_PRO;damage=4} @forward{f=12;y=0;lockpitch=true}
Earth_Shockwave_PRO:
  Skills:
  - projectile{tickinterpolation=5;oT=Earth_Shockwave_T;v=15;i=6;hR=1;vR=1;md=40;mr=50;hnp=false;hO=0;sE=false;sB=false;hs=true;hfs=0;sfo=3.5;syo=0;tyo=0;sso=0;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true}
Earth_Shockwave_T:
  Cooldown: 0.01
  Skills:
  - summon{type=VFX_Earth_Shockwave;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  #up
  - skill{s=Earth_Shockwave_DAMAGE_D1;delay=8} @EntitiesNearOrigin{r=4;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}
  #slam
  - skill{s=Earth_Shockwave_DAMAGE_D2;delay=40} @EntitiesNearOrigin{r=4;conditions=[- isLiving true - hasaura{aura=immunedelay} false - hasaura{aura=EARTHSHIFT} false ]}

Earth_Shockwave_DAMAGE_D1:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHSHOCKUP} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHSHOCKUP;d=10}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  - throw{velocity=0;velocityY=4}

  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Shockwave_DAMAGE_D2:
  Cooldown: 0.01
  TargetConditions:
  - isLiving true
  - hasaura{aura=immunedelay} false
  - hasaura{aura=EARTHSHOCKDOWN} false 
  Skills:
  - aura{auraname=immunedelay;d=1;ma=true}
  - aura{auraname=EARTHSHOCKDOWN;d=10}
  - damage{a=<skill.damage> * 2;pkb=true;hnp=true;hp=true}
  - effect:sound{s=block.deepslate.break;volume=2;pitch=<random.float.0.7to0.8>;cooldown=0.1} @origin
  - effect:sound{s=terramancer_sounds:samus.terramancer.earth_break;volume=1.3;pitch=<random.float.1to1.1>;cooldown=0.1} @origin
  - stun{d=<caster.var.earthshockwavedur>;kb=true;f=true;CancelOnTakeDamage=false;CancelOnDeath=true}
  - orbital{onTick=Earth_Clap_STUN_FX;r=0.5;points=22;i=1;duration=<caster.var.earthshockwavedur>;oy=2.3;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}
  - orbital{auraName=VFX_Earth_Root2;bulletType=MOB;mob=VFX_Earth_Root2;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=1;duration=<caster.var.earthshockwavedur>;oy=1.4;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}

  #impact
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Impact2;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_Earth_Break_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
Earth_Shockwave_SUDO:
  Skills:
  - state{s=remove;delay=<caster.var.earthshockwavedur> - 15} @trigger

